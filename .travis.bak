sudo: required
services:
- docker
install:
- docker login --email=$DOCKER_HUB_EMAIL --username=takawang --password=$DOCKER_HUB_PASSWORD
script:
- docker build -t $CZMQ_IMG czmq/.
- if [ ! -z "$TRAVIS_TAG" ]; then docker tag $CZMQ_IMG:latest $CZMQ_IMG:$TRAVIS_TAG;
  fi && docker push $CZMQ_IMG

- docker build -t $MODBUS_IMG modbus/.
- if [ ! -z "$TRAVIS_TAG" ]; then docker tag $MODBUS_IMG:latest $MODBUS_IMG:$TRAVIS_TAG;
  fi && docker push $MODBUS_IMG

- docker build -t $NODEZMQ_IMG nodezmq/.
- if [ ! -z "$TRAVIS_TAG" ]; then docker tag $NODEZMQ_IMG:latest $NODEZMQ_IMG:$TRAVIS_TAG;
  fi && docker push $NODEZMQ_IMG

- docker build -t $DOXYGEN_IMG doxygen/.
- if [ ! -z "$TRAVIS_TAG" ]; then docker tag $DOXYGEN_IMG:latest $DOXYGEN_IMG:$TRAVIS_TAG;
  fi && docker push $DOXYGEN_IMG

- docker build -t $GO_IMG golang/.
- if [ ! -z "$TRAVIS_TAG" ]; then docker tag $GO_IMG:latest $GO_IMG:$TRAVIS_TAG;
  fi && docker push $GO_IMG

- docker build -t $GOZMQ_IMG gozmq/.
- if [ ! -z "$TRAVIS_TAG" ]; then docker tag $GOZMQ_IMG:latest $GOZMQ_IMG:$TRAVIS_TAG;
  fi && docker push $GOZMQ_IMG

- docker build -t $DRONE_IMG gozmq/.
- if [ ! -z "$TRAVIS_TAG" ]; then docker tag $DRONE_IMG:latest $DRONE_IMG:$TRAVIS_TAG;
  fi && docker push $DRONE_IMG

env:
  global:
  - CZMQ_IMG=takawang/ubuntu-czmq
  - MODBUS_IMG=takawang/ubuntu-modbus
  - NODEZMQ_IMG=takawang/ubuntu-node-zmq
  - DOXYGEN_IMG=takawang/ubuntu-doxygen
  - GO_IMG=takawang/ubuntu-golang
  - GOZMQ_IMG=takawang/ubuntu-gozmq
  - DRONE_IMG=takawang/ubuntu-drone-psmb
  - secure: e36j1BZMCGTzOQn/4KiDAg6i9AZAKmhAE6ktu/+4uGQdLNXKvT5tESo/+qoq2P1B0xjNpP0vxeLWYPkqFaIlZXHKwiY42uxVpwkFn+LKwClfkDwGVhwFoxDUckxbSRuUAz9L64nA8HDyfX8T93Bb1+n1uvhe+nytunowR56Rb2s3idNiCOUx0icpJQxX48ZEgn/hmlBgzet2Y6ak7Bg46xGffbgGBSh+GeMFOc12/9HDgw0QqFaHbwO02H4x9/B/FSoV0+UsV8ArF4aj01agMia08fzuVeohZ4RJvW6qzyWZwgaXHhUXtPJp0V/bervnUOJDwGW746so7CBP8NtxfHUJNeI+C6XpILfBpJu0raJbL8vmZprvmbFP0FBRdbJk/N488nqHeycJnEOx1utngv5SidKVXY1CfLBrQ1wjfBKv6nRoIXUeyXbuGAIij8TBJKmxF8EdYR2fMlo6zCzQPUdk5UXYYLOx/ryBOQeGJPl4Wy+PnIQ6geAemN4rRbR0lsB3X54Sono/+uVjaP3kRVrXgctExwaS5nRFvm+C87hzEbNLaTfsbYTqE7MLgckODwPMEvogmLkfa4ZJqnpksvjkaKyMoOn6zsx01LD2bIvH3fDHxpOrHWIR3FeTrfk8Dgk7j8f21FVHZKfShcog0qRJNFoRDKDxPEBqhWudmKI=
  - secure: qws47iboEtpONAxsXvT35q4vouhEWHkjUA5PkOia3XLd8ZBHKncsQtp66SXrfQ4xQmElBdVcS3bdGnmHYJFKyXU3uOavc7NQbJhuk8XvyMrN7I8nzWoewFcLWQwKGefmSYlpT56CUIiJez4X7Rvys42hdy7MrLB65Y23Z6KzlGPYDQX4sqG0VdFI2rYSBDqJRNOWOzzwHNKD9DKShzKBdalyuSAxrDx5rzRfNh7LWjtpF70U70dJMHuqBi44++gdHEmiPgIaGT49QrUb86pJUzh9j/4qknGNnKTn0Yu0y7MlcAutjmWk9Chn662c3HbzEEhEVADXsdT1l9ZX5NGjAMk0GUJW3GLE374j5wtrXE8WzboFXEKuo9+Mi96Sqz0wbbIE8s/yt1kXQVAUVteTk/TG3ugg7P8seIT8Sl/GfxgUXOzx4XgjfHrk4cQQ1pVXLKQZ6MJ3QgCc+siblBh0bAcwBaFb/XWQBvSxxJRwYL7sflG9SMOHfyRxbF6zU93NExkfwPUidGujVEsFYz+tRIpA+B4FCkKLq/opsufvPR06jo9RakLYDfI3Nv+HSOBLYmpTN78yK/M6akyNHDSesuRtE6c9Qu74wgsspKfjYfJsILSey77zY8eujBZpApaR+PJyN0CBZp+P3OoA/yKVIlsouEW+RakLlMCjR0Y+vqE=
notifications:
  email: false
  hipchat:
    on_success: always
    rooms:
      secure: aklONboOLgu63ji6MvOv6fkhMiL1lP5SBsq35iMfRdqFSrH7qzXEC8AHYvI71gjE19XRblNnWahinJVNGXih9Aw44JfZc7+/RlEZPNvnT3JCKwKYubwdure8mBuxE+04Eg0BNp9XLoVlw/RX9ejeCK90OkhKd3wBHuNwIWaqSYMSEEK1Ye95r4Rx62OH0n+yHnjmKULKM9+axFBIb6Kymz+lPIjb+hWNdmtDpGWwPpmUBomTY6PRaOS4KXMcuOlBlCqQmT4O7Z+uqjuXwg7LwWXhdwQeuPvCdwnT03ENahnuNVAFl6xbqYZnwyNd/9utzvOFwZLw7cqm5Im5IY7sl60Yi/DD00RZne5AibE3l81q33+rUY9+c8X4R6YlfzICrKwBL/7bhfhhFUHj2xlpmFnUc8mwebQg8xb+szNePQucyFrB+/Dcyyk/Hi3zmLhhGfsBWeA0bEVrknh/q8zLOMDrTQnc2uUr4Gn4lHYzDbQQgsuGrs6vV4KjJAD3Z9JQ+Z5OfITFuGVGLtGE5yY2pU9oLCKkpibNv/4gWqDkNKW0pwWLsJppi9lYuZe1ItnxkCwL3qJ33KEqHvVb5lvh9gDiBzzeuuuFewIadCQezwkE5hLLAw1QTqKjktz6JN1uTNE/1khgFYXNsSw6djhEh/eQieeA96QWL4QW9Jjr9eA=
    template:
    - '%{repository} (%{commit}) : %{message} %{foo} '
    - 'Build details: %{build_url}'
